!function(){"use strict";angular.module("selectTags",["selectOptions","ngSanitize","tagsInput","openDropdown","selectItems"])}(),function(){"use strict";function e(e,o){return{replace:!0,restrict:"E",template:function(e,o){var n="select_tags_"+t()+"_"+t()+"_"+t(),l=e.html().trim();return['<div class="select-tags" tabindex="1" data-id="'+n+'">','<tags-input id="'+n+'" ','class="tags-input"',"ng-class=\"{'opened': "+n+".isOpened, 'closed': !"+n+'.isOpened}"','placeholder="'+(o.placeholder?o.placeholder:"")+'"',o.minLength?'min-length="'+o.minLength+'"':"",o.maxLength?'max-length="'+o.maxLength+'"':"",o.maxItems?'max-items="'+o.maxItems+'"':"",o.uniqueNames?'unique-names="'+o.uniqueNames+'"':"",o.delimiters?'delimiters="'+o.delimiters+'"':"",o.noPersist?'no-persist="'+o.noPersist+'"':"",'is-remove-button="'+o.isRemoveButton+'"','is-restore-on-backspace="'+o.isRestoreOnBackspace+'"','ng-model="'+o.ngModel+'"',o.onChange?'on-change="'+o.onChange+'"':"",'select-options="'+o.selectOptions+'"','caret-position="'+n+'.caretPosition"','decorator="'+o.tagsDecorator+'"','disabled="'+o.disabled+'"',"></tags-input>",'<open-dropdown class="open-dropdown" ','for="'+n+'" ','disabled="'+o.disabled+'"','tabindex="3" ','toggle-click="true" ','is-opened="'+n+'.isOpened">','<select-items class="select-items"','multiselect="true"','search="false"','select-options="'+o.selectOptions+'"','ng-model="'+o.ngModel+'"',o.onChange?'on-change="'+o.onChange+'"':"",o.dropdownShowLimit?'show-limit="'+o.dropdownShowLimit+'"':"",o.maxItems?'selection-limit="'+o.maxItems+'"':"",o.searchFilter?'search-filter="'+o.searchFilter+'"':"",o.autoSelect?'auto-select="'+o.autoSelect+'"':"",o.selectAll?'select-all="'+o.selectAll+'"':"",o.groupSelectAll?'group-select-all="'+o.groupSelectAll+'"':"",o.hideControls?'hide-controls="'+o.hideControls+'"':"",o.hideNoSelection?'hide-no-selection="'+o.hideNoSelection+'"':"",o.selectAllLabel?'select-all-label="'+o.selectAllLabel+'"':"",o.deselectAllLabel?'deselect-all-label="'+o.deselectAllLabel+'"':"",o.noSelectionLabel?'no-selection-label="'+o.noSelectionLabel+'"':"",o.loadingLabel?'loading-label="'+o.loadingLabel+'"':"",o.loadPromise?'load-promise="'+o.loadPromise+'"':"",o.loadByKeywordPromise?'load-by-keyword-promise="'+o.loadByKeywordPromise+'"':"",o.loadByKeywordDelay?'load-by-keyword-delay="'+o.loadByKeywordDelay+'"':"",o.loadByKeywordMinQueryLength?'load-by-keyword-min-query-length="'+o.loadByKeywordMinQueryLength+'"':"",o.filters?'filters="'+o.filters+'"':"",o.dropdownItemDecorator?'decorator="'+o.dropdownItemDecorator+'"':"",o.dropdownGroupDecorator?'group-decorator="'+o.dropdownGroupDecorator+'"':"",'number-of-displayed-items="numberOfDisplayedItems"','search-keyword="'+n+'.userInputText"','model-insert-position="'+n+'.caretPosition"',">"+l+"</select-items></open-dropdown></div>"].join("")},link:function(t,n,l){var s,i=function(){if(!s){var e=n[0].getElementsByClassName("tags-input")[0];s=angular.element(e).controller("tagsInput")}return s},a=n[0].getElementsByClassName("select-items")[0],r=angular.element(a).controller("selectItems"),d=angular.element(n).attr("data-id");t[d]={},t[d].userInputText="",t[d].isOpened=!1,t[d].caretPosition=0;var c=l.closeDropdownOnTagAdd?o(l.closeDropdownOnTagAdd)(t):!1;n[0].addEventListener("keydown",function(e){switch(e.keyCode){case 38:return e.preventDefault(),t.$broadcast("select-items.active_next"),void t.$digest();case 40:return e.preventDefault(),t.$broadcast("select-items.active_previous"),void t.$digest();case 13:if(t[d].isOpened){e.preventDefault();var o=r.selectActive();o===!0&&(e.stopPropagation(),c&&(t[d].isOpened=!1)),t.$digest()}return}},!0),t.$on("select-items.item_selected",function(o,n){n.element===a&&(n.isNewSelection?++t[d].caretPosition:t[d].caretPosition>0&&t[d].caretPosition>n.index&&--t[d].caretPosition,e(function(){i().clearInputValue()}))}),e(function(){i().onTextEntered(function(e){t[d].userInputText=e,t[d].isOpened=!0})},300)}}}function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}angular.module("selectTags").directive("selectTags",e),e.$inject=["$timeout","$parse"]}();